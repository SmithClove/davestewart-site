<template>
  <div class="layout__home home">
    <router-link to="/bio/" style="display: block">
      <svg ref="splash" class="home__splash" @animationend="onAnimationEnd" width="100%" viewBox="0 0 840 400" xmlns="http://www.w3.org/2000/svg">
        <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
          <g id="Greeting">
            <rect id="Background" fill="#FFFFFF" fill-rule="nonzero" x="0" y="0" width="840" height="400"></rect>
            <line x1="267.5" y1="89" x2="267.5" y2="311" id="Path-2" stroke="#DDDDDD" stroke-width="3" stroke-dasharray="3"></line>
            <g id="Hello" transform="translate(317.624377, 135.148917)" fill="#323232" fill-rule="nonzero">
              <g id="text">
                <polygon id="h" points="19.227156 121.131083 19.227156 72.902967 67.134819 72.902967 67.134819 121.131083 86.361975 121.131083 86.361975 8.972673 67.134819 8.972673 67.134819 54.637168 19.227156 54.637168 19.227156 8.972673 0 8.972673 0 121.131083"></polygon>
                <path id="e" d="M140.838917,43.261101 C161.460042,43.261101 178.783373,59.1219182 179.127778,82.1373778 L179.133003,82.836997 L179.132233,83.807222 C179.127534,85.2722996 179.10571,87.4041178 178.997347,89.5803846 L178.972777,90.047181 L122.252667,90.047181 C123.694703,96.776685 131.545792,105.428906 143.562764,105.428906 C156.044159,105.428906 163.444676,98.6544028 164.307246,97.8216344 L164.33863,97.79116 L164.392183,97.738043 L174.005761,112.15841 C174.005761,112.15841 161.988789,123.053799 143.562764,123.053799 C120.490177,123.053799 102.705058,105.428906 102.705058,83.15745 C102.705058,60.885994 118.887914,43.261101 140.838917,43.261101 Z M140.838917,60.725768 C128.643301,60.725768 123.023379,69.1802295 122.276739,75.8746951 L122.252667,76.107493 L159.905847,76.107493 C159.585394,69.538214 153.496795,60.725768 140.838917,60.725768 Z"></path>
                <polygon id="l-1" points="214.703242 121.131083 214.703242 0 195.476086 0 195.476086 121.131083"></polygon>
                <polygon id="l-2" points="257.64389 121.131083 257.64389 0 238.416734 0 238.416734 121.131083"></polygon>
                <path id="o" d="M314.524227,43.261101 C337.116135,43.261101 355.06148,60.725768 355.06148,83.15745 C355.06148,105.428906 337.116135,123.053799 314.524227,123.053799 C291.932318,123.053799 273.986973,105.428906 273.986973,83.15745 C273.986973,60.725768 291.932318,43.261101 314.524227,43.261101 Z M314.524227,61.206447 C301.545896,61.206447 293.534581,71.300704 293.534581,83.15745 C293.534581,95.014196 301.545896,105.108453 314.524227,105.108453 C327.502557,105.108453 335.513872,95.014196 335.513872,83.15745 C335.513872,71.300704 327.502557,61.206447 314.524227,61.206447 Z"></path>
              </g>
              <g id="dots">
                <path id="dot-1" d="M380.537462,123.053799 C387.587419,123.053799 393.19534,117.445878 393.19534,110.395921 C393.19534,103.345964 387.587419,97.738043 380.537462,97.738043 C373.487505,97.738043 367.879584,103.345964 367.879584,110.395921 C367.879584,117.445878 373.487505,123.053799 380.537462,123.053799 Z"></path>
                <path id="dot-2" d="M419.566753,123.053799 C426.61671,123.053799 432.22463,117.445878 432.22463,110.395921 C432.22463,103.345964 426.61671,97.738043 419.566753,97.738043 C412.516796,97.738043 406.908875,103.345964 406.908875,110.395921 C406.908875,117.445878 412.516796,123.053799 419.566753,123.053799 Z"></path>
                <path id="dot-3" d="M458.596043,123.053799 C465.646001,123.053799 471.253921,117.445878 471.253921,110.395921 C471.253921,103.345964 465.646001,97.738043 458.596043,97.738043 C451.546086,97.738043 445.938166,103.345964 445.938166,110.395921 C445.938166,117.445878 451.546086,123.053799 458.596043,123.053799 Z"></path>
              </g>
            </g>
          </g>
          <g id="Logo" transform="translate(59.078103, 131.607625)" fill="#EA4848" fill-rule="nonzero">
            <path d="M96.2324963,136.840127 C105.268797,136.840127 113.494489,135.13393 120.909572,131.721536 C128.324654,128.309143 134.663354,123.550575 139.92567,117.445833 C145.187987,111.341092 149.267611,104.109321 152.164543,95.7505215 C155.061475,87.3917217 156.509941,78.2659159 156.509941,68.3731041 C156.509941,58.5429051 155.061475,49.4484057 152.164543,41.0896058 C149.267611,32.730806 145.187987,25.5146886 139.92567,19.4412535 C134.663354,13.3678184 128.324654,8.60925075 120.909572,5.16555045 C113.494489,1.72185015 105.268797,0 96.2324963,0 L58.9174111,0 L58.9174111,136.840127 L96.2324963,136.840127 Z M86.0263147,112.421162 L86.0263147,24.4189658 L96.9523546,24.4189658 C102.108362,24.4189658 106.706244,25.4364227 110.746003,27.4713365 C114.785761,29.5062503 118.200951,32.4177424 120.991574,36.2058127 C123.782196,39.993883 125.921673,44.6115721 127.410005,50.0588798 C128.898337,55.5061875 129.642503,61.610929 129.642503,68.3731041 C129.642503,75.197892 128.898337,81.3339398 127.410005,86.7812475 C125.921673,92.2285553 123.782196,96.8462443 120.991574,100.634315 C118.200951,104.422385 114.785761,107.333877 110.746003,109.368791 C106.706244,111.403705 102.108362,112.421162 96.9523546,112.421162 L86.0263147,112.421162 Z" id=":D"></path>
            <path d="M18.3410087,55.5153332 C20.9115288,55.5153332 23.3083652,55.0505514 25.5315178,54.1209876 C27.7546703,53.1914238 29.6999288,51.9043354 31.3672933,50.2597226 C33.0346577,48.6151097 34.3372861,46.666601 35.2751786,44.4141964 C36.2130711,42.1617918 36.6820174,39.7485012 36.6820174,37.1743246 C36.6820174,34.6001479 36.2130711,32.2047335 35.2751786,29.9880814 C34.3372861,27.7714293 33.0346577,25.8407968 31.3672933,24.1961839 C29.6999288,22.551571 27.7546703,21.2466065 25.5315178,20.2812902 C23.3083652,19.315974 20.9115288,18.8333159 18.3410087,18.8333159 C15.701015,18.8333159 13.2694419,19.315974 11.0462893,20.2812902 C8.82313675,21.2466065 6.89524664,22.551571 5.26261897,24.1961839 C3.6299913,25.8407968 2.34473122,27.7714293 1.40683873,29.9880814 C0.468946245,32.2047335 0,34.6001479 0,37.1743246 C0,39.7485012 0.468946245,42.1617918 1.40683873,44.4141964 C2.34473122,46.666601 3.6299913,48.6151097 5.26261897,50.2597226 C6.89524664,51.9043354 8.82313675,53.1914238 11.0462893,54.1209876 C13.2694419,55.0505514 15.701015,55.5153332 18.3410087,55.5153332 Z" id="Path"></path>
            <path d="M18.3410087,120.86499 C20.9115288,120.86499 23.3083652,120.400208 25.5315178,119.470644 C27.7546703,118.54108 29.6999288,117.253992 31.3672933,115.609379 C33.0346577,113.964766 34.3372861,112.016257 35.2751786,109.763853 C36.2130711,107.511448 36.6820174,105.098158 36.6820174,102.523981 C36.6820174,99.9498043 36.2130711,97.5543899 35.2751786,95.3377378 C34.3372861,93.1210857 33.0346577,91.1904532 31.3672933,89.5458403 C29.6999288,87.9012275 27.7546703,86.5962629 25.5315178,85.6309467 C23.3083652,84.6656304 20.9115288,84.1829723 18.3410087,84.1829723 C15.701015,84.1829723 13.2694419,84.6656304 11.0462893,85.6309467 C8.82313675,86.5962629 6.89524664,87.9012275 5.26261897,89.5458403 C3.6299913,91.1904532 2.34473122,93.1210857 1.40683873,95.3377378 C0.468946245,97.5543899 0,99.9498043 0,102.523981 C0,105.098158 0.468946245,107.511448 1.40683873,109.763853 C2.34473122,112.016257 3.6299913,113.964766 5.26261897,115.609379 C6.89524664,117.253992 8.82313675,118.54108 11.0462893,119.470644 C13.2694419,120.400208 15.701015,120.86499 18.3410087,120.86499 Z" id="Path"></path>
          </g>
        </g>
      </svg>
    </router-link>
    <h1>I'm Dave,</h1>
    <Content id="content" class="pageContent"/>
  </div>
</template>

<script>
export default {
  mounted () {
    const animCount = parseInt(document.body.getAttribute('data-animCount') || 0)
    if (animCount < 3) {
      document.body.setAttribute('data-animCount', String(animCount + 1))
      setTimeout(() => {
        this.$refs.splash.classList.add('bounce')
      }, 300)
    }
  },

  methods: {
    onAnimationEnd (event) {
      if (event.target.id === 'dot-3') {
        this.$refs.splash.classList.remove('bounce')
      }
    }
  }
}
</script>

<style lang="scss">
@import "../styles/variables";

.home {

  h1 {
    font-weight: normal;
    margin-top: -.5rem;
  }

  hr {
    border: none;
    height: 0;
    background: none;
    border-top: 3px dotted $grey-lightest;
  }

  .homeThumbs,
  .pageContent {

    > ul,
    > p {
      @include introText;
    }

    ul {
      padding-left: 1rem;
    }

    li {
      font-size: .8em !important;
    }
  }

  &__splash {
    width: 100%;
    aspect-ratio: 840/400;
    user-select: none;
    pointer-events: all;

    &.bounce,
    &:hover {
      #dot-1 {
        animation: bounce 1.2s ease .6s 1 normal forwards;
      }
      #dot-2 {
        animation: bounce 1.2s ease .68s 1 normal forwards;
      }
      #dot-3 {
        animation: bounce 1.2s ease .76s 1 normal forwards;
      }
    }
  }
}

@mixin bottom () {
  animation-timing-function: ease-out;
  transform: translateY(0);
}

@mixin top ($value) {
  animation-timing-function: ease-in;
  transform: translateY($value);
}

// haven't quite got this right yet...
@keyframes squash {
  0% {
    transform: translateY(0) scaleY(1);
    transform-origin: 12px 122px;
    animation-timing-function: ease-in;
  }

  12% {
    transform: translateY(0) scaleY(.7);
    transform-origin: 12px 122px;
    animation-timing-function: ease-in-out;
  }

  27% {
    @include top(-40px);
    transform-origin: 0 100px;
    transform: translateY(-40px) scaleY(1.2);
  }
  40% { @include bottom; }

  53% { @include top(-20px); }
  65% { @include bottom; }

  76% { @include top(-10px); }
  86% { @include bottom; }

  88% { @include top(-4px); }
  95% { @include bottom; }

  98% { @include top(-2px); }
  100% { @include bottom; }
}

@keyframes bounce {
  0% { @include bottom; }

  19% { @include top(-40px); }
  37% { @include bottom; }

  50% { @include top(-20px); }
  62% { @include bottom; }

  71% { @include top(-10px); }
  80% { @include bottom; }

  85% { @include top(-4px); }
  91% { @include bottom; }

  95% { @include top(-2px); }
  100% { @include bottom; }
}
</style>
